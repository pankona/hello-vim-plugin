# hello-vim-plugin 設計概要

## 1. 目的
Roo Codeライクな機能を持つVimプラグインの開発

## 2. 主要機能
- 自然言語でのコミュニケーション
- ワークスペース内のファイル読み書き
- ターミナルコマンドの実行
- OpenAI互換/カスタムAPI・モデルとの統合
- カスタムモードによる柔軟な対応

※ブラウザ操作の自動化機能は、Vimプラグインの制約上、実装対象外とする

## 3. 技術スタック
### 3.1 要件
- Vim 8以上をサポート
- 最小限のパッケージ依存

### 3.2 実装言語・フレームワーク
- Vimscript
- Lua
- Go（CLIツール）

## 4. アーキテクチャ設計
### 4.1 全体構成
- Vimプラグイン部分（Vimscript + Lua）
- バックエンドCLIツール（Go）
- 標準出力を介した通信

### 4.2 非同期処理の設計
job/channelアプローチを採用

#### 採用理由
1. 外部プロセス（Go CLIツール）との通信に最適
2. Vim8の標準機能として安定している
3. プロセス管理とI/O制御が容易
4. シンプルなAPI設計

#### 補足
- プラグイン内部のUI操作やバッファ管理には、必要に応じてLuaを活用
- これにより、job/channelの通信安定性とLuaの柔軟性を両立

## 5. ディレクトリ構成
```
.
├── plugin/
│   └── hello-vim-plugin.vim  # プラグインのメインエントリーポイント
├── lua/
│   └── hello-vim-plugin/     # Lua実装
│       ├── init.lua
│       └── ui.lua
├── cmd/
│   └── hello-vim-plugin/     # Go CLIツール
│       └── main.go
└── README.md
```

## 6. 開発方針
- 段階的な機能実装
- 最小限のパッケージ依存を維持
- 適切なテストカバレッジの確保
- ドキュメントの継続的な更新